<!DOCTYPE html>
<html lang="tr">
<head>'https://eticaret-glif.onrender.com/api'
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/noUiSlider/distribute/nouislider.min.css">

    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
            --background-color: #f8fafc;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --radius-sm: 0.375rem;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
        }

        .filter-container {
            width: 280px;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
            margin: 1rem;
            position: relative;
            max-height: calc(100vh - 2rem);
            overflow-y: auto;
        }

        .filter-header {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
        }

        .filter-title {
            font-weight: 600;
            font-size: 1rem;
        }

        .filter-section {
            border-bottom: 1px solid var(--border-color);
        }

        .section-header {
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .section-header h3 {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .section-content {
            padding: 0 1rem 1rem;
            display: none;
        }

        .section-content.active {
            display: block;
        }

        .select2-container {
            width: 100% !important;
            margin-bottom: 0.5rem;
        }

        .range-slider {
            padding: 1rem 0;
        }

        .range-inputs {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .range-input {
            width: 50%;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
        }

        .active-filters {
            padding: 1rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            background: var(--background-color);
            position: sticky;
            top: 48px;
            z-index: 9;
        }

        .filter-tag {
            background: white;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            box-shadow: var(--shadow-sm);
        }

        .filter-tag i {
            cursor: pointer;
            color: #64748b;
        }

        .filter-actions {
            padding: 1rem;
            display: flex;
            gap: 0.5rem;
            position: sticky;
            bottom: 0;
            background: white;
            border-top: 1px solid var(--border-color);
        }

        .btn {
            padding: 0.75rem 1rem;
            border-radius: var(--radius-sm);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--background-color);
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .loading-overlay.active {
            display: flex;
        }

        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid var(--border-color);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .select2-container--default .select2-selection--multiple {
            border-color: var(--border-color);
            padding: 0.25rem;
        }

        .noUi-connect {
            background: var(--primary-color);
        }

        .noUi-handle {
            border: none;
            background: white;
            box-shadow: 0 0 0 2px var(--primary-color);
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .filter-container {
                width: 100%;
                margin: 0;
                border-radius: 0;
                height: 100vh;
                max-height: 100vh;
            }

            .filter-actions {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="filter-container">
        <!-- Filter Header -->
        <div class="filter-header">
            <h2 class="filter-title">Filtreler</h2>
            <button class="btn btn-secondary" id="clearAllBtn">
                <i class="fas fa-times"></i>
                Temizle
            </button>
        </div>

        <!-- Active Filters -->
        <div class="active-filters" id="activeFilters"></div>

        <!-- Filter Sections -->
        <div class="filter-sections">
            <!-- Kategori -->
            <div class="filter-section" data-filter="category">
                <div class="section-header">
                    <h3>Kategori</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="categorySelect" multiple>
                        <!-- Dinamik olarak doldurulacak -->
                    </select>
                </div>
            </div>

            <!-- Fiyat Aralığı -->
            <div class="filter-section" data-filter="price">
                <div class="section-header">
                    <h3>Fiyat Aralığı</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <div id="priceRangeSlider"></div>
                    <div class="range-inputs">
                        <input type="number" class="range-input" id="minPrice" placeholder="Min">
                        <input type="number" class="range-input" id="maxPrice" placeholder="Max">
                    </div>
                </div>
            </div>

            <!-- Model Formatları -->
            <div class="filter-section" data-filter="modelFormats">
                <div class="section-header">
                    <h3>Model Formatları</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="modelFormatSelect" multiple>
                        <!-- Dinamik olarak doldurulacak -->
                    </select>
                </div>
            </div>

            <!-- Üretici -->
            <div class="filter-section" data-filter="manufacturer">
                <div class="section-header">
                    <h3>Üretici</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="manufacturerSelect" multiple>
                        <!-- Dinamik olarak doldurulacak -->
                    </select>
                </div>
            </div>

            <!-- Stok Durumu -->
            <div class="filter-section" data-filter="status">
                <div class="section-header">
                    <h3>Stok Durumu</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="statusSelect">
                        <option value="">Tümü</option>
                        <option value="active">Stokta Var</option>
                        <option value="out_of_stock">Stokta Yok</option>
                    </select>
                </div>
            </div>

            <!-- Rating -->
            <div class="filter-section" data-filter="rating">
                <div class="section-header">
                    <h3>Değerlendirme</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="ratingSelect">
                        <option value="">Tümü</option>
                        <option value="4">4+ Yıldız</option>
                        <option value="3">3+ Yıldız</option>
                        <option value="2">2+ Yıldız</option>
                    </select>
                </div>
            </div>

            <!-- Teslimat Süresi -->
            <div class="filter-section" data-filter="delivery">
                <div class="section-header">
                    <h3>Teslimat Süresi</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="deliverySelect">
                        <option value="">Tümü</option>
                        <option value="1-3">1-3 gün</option>
                        <option value="4-7">4-7 gün</option>
                        <option value="7-14">7-14 gün</option>
                        <option value="15+">15+ gün</option>
                    </select>
                </div>
            </div>

            <!-- Üretim Yılı -->
            <div class="filter-section" data-filter="year">
                <div class="section-header">
                    <h3>Üretim Yılı</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <div id="yearRangeSlider"></div>
                    <div class="range-inputs">
                        <input type="number" class="range-input" id="minYear" placeholder="Min">
                        <input type="number" class="range-input" id="maxYear" placeholder="Max">
                    </div>
                </div>
            </div>

            <!-- Sertifikalar -->
            <div class="filter-section" data-filter="certificates">
                <div class="section-header">
                    <h3>Sertifikalar</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="certificateSelect" multiple>
                        <!-- Dinamik olarak doldurulacak -->
                    </select>
                </div>
            </div>

            <!-- Ağırlık Aralığı -->
            <div class="filter-section" data-filter="weight">
                <div class="section-header">
                    <h3>Ağırlık Aralığı</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <div id="weightRangeSlider"></div>
                    <div class="range-inputs">
                        <input type="number" class="range-input" id="minWeight" placeholder="Min kg">
                        <input type="number" class="range-input" id="maxWeight" placeholder="Max kg">
                    </div>
                </div>
            </div>

            <!-- Garanti Süresi -->
            <div class="filter-section" data-filter="warranty">
                <div class="section-header">
                    <h3>Garanti Süresi</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="warrantySelect">
                        <option value="">Tümü</option>
                        <option value="1">1 Yıl</option>
                        <option value="2">2 Yıl</option>
                        <option value="5">5 Yıl</option>
                        <option value="10">10 Yıl</option>
                        <option value="lifetime">Ömür Boyu</option>
                    </select>
                </div>
            </div>

            <!-- Sıralama -->
            <div class="filter-section" data-filter="sort">
                <div class="section-header">
                    <h3>Sıralama</h3>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="section-content">
                    <select class="select2" id="sortSelect">
                        <option value="newest">En Yeni</option>
                        <option value="price_asc">Fiyat (Düşük-Yüksek)</option>
                        <option value="price_desc">Fiyat (Yüksek-Düşük)</option>
                        <option value="rating">En Çok Değerlendirilenler</option>
                        <option value="views">En Çok Görüntülenenler</option>
                        <option value="bestseller">En Çok Satanlar</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Filter Actions -->
        <div class="filter-actions">
            <button class="btn btn-primary" id="applyFiltersBtn">
                <i class="fas fa-check"></i>
                Uygula
            </button>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Required Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/nouislider@14.6.3/distribute/nouislider.min.js"></script>
    
    <script>
        // Filtreleme State'i
        const filterState = {
            category: [],
            price: { min: null, max: null },
            modelFormats: [],
            manufacturer: [],
            status: '',
            rating: '',
            delivery: '',
            year: { min: null, max: null },
            certificates: [],
            weight: { min: null, max: null },
            warranty: '',
            sort: 'newest'
        };

        // API Endpoint'leri
        const API = {
            baseUrl: 'https://eticaret-glif.onrender.com/api',
            endpoints: {
                products: '/products',
                filter: '/products/filter',
                categories: '/categories',
                manufacturers: '/manufacturers'
            }
        };

        // Utility Functions
        const utils = {
            showLoading: (show = true) => {
                document.getElementById('loadingOverlay').classList.toggle('active', show);
            },
            
            showError: (message) => {
                // Hata gösterme fonksiyonu
                console.error(message);
                // TODO: Kullanıcıya hata göster
            },

            debounce: (func, wait) => {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
        };

        // Filter Manager
        class FilterManager {
            constructor() {
                this.initializeComponents();
                this.setupEventListeners();
                this.loadInitialData();
            }

            async initializeComponents() {
                // Select2 inicializasyonu
                $('.select2').select2({
                    placeholder: 'Seçiniz',
                    allowClear: true,
                    width: '100%'
                });

                // Range Slider'ları initialize et
                this.initializeRangeSliders();
                
                // Accordion yapısını kur
                this.initializeAccordion();
            }

            initializeRangeSliders() {
                // Fiyat Range Slider
                const priceSlider = document.getElementById('priceRangeSlider');
                noUiSlider.create(priceSlider, {
                    start: [0, 10000],
                    connect: true,
                    range: {
                        'min': 0,
                        'max': 10000
                    },
                    format: {
                        to: value => Math.round(value),
                        from: value => parseInt(value)
                    }
                });

                // Yıl Range Slider
                const yearSlider = document.getElementById('yearRangeSlider');
                const currentYear = new Date().getFullYear();
                noUiSlider.create(yearSlider, {
                    start: [2000, currentYear],
                    connect: true,
                    range: {
                        'min': 2000,
                        'max': currentYear
                    },
                    format: {
                        to: value => Math.round(value),
                        from: value => parseInt(value)
                    }
                });

                // Ağırlık Range Slider
                const weightSlider = document.getElementById('weightRangeSlider');
                noUiSlider.create(weightSlider, {
                    start: [0, 1000],
                    connect: true,
                    range: {
                        'min': 0,
                        'max': 1000
                    },
                    format: {
                        to: value => Math.round(value),
                        from: value => parseInt(value)
                    }
                });

                // Range Slider event listener'ları
                this.setupRangeSliderListeners();
            }

            setupRangeSliderListeners() {
                // Fiyat slider events
                const priceSlider = document.getElementById('priceRangeSlider');
                priceSlider.noUiSlider.on('update', (values) => {
                    document.getElementById('minPrice').value = values[0];
                    document.getElementById('maxPrice').value = values[1];
                });

                // Yıl slider events
                const yearSlider = document.getElementById('yearRangeSlider');
                yearSlider.noUiSlider.on('update', (values) => {
                    document.getElementById('minYear').value = values[0];
                    document.getElementById('maxYear').value = values[1];
                });

                // Ağırlık slider events
                const weightSlider = document.getElementById('weightRangeSlider');
                weightSlider.noUiSlider.on('update', (values) => {
                    document.getElementById('minWeight').value = values[0];
                    document.getElementById('maxWeight').value = values[1];
                });
            }

            initializeAccordion() {
                document.querySelectorAll('.section-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const content = header.nextElementSibling;
                        const icon = header.querySelector('i');
                        
                        // Diğer açık bölümleri kapat
                        document.querySelectorAll('.section-content.active').forEach(section => {
                            if (section !== content) {
                                section.classList.remove('active');
                                section.previousElementSibling.querySelector('i').style.transform = 'rotate(0deg)';
                            }
                        });

                        // Tıklanan bölümü aç/kapat
                        content.classList.toggle('active');
                        icon.style.transform = content.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
                    });
                });
            }

            setupEventListeners() {
                // Uygula butonu
                document.getElementById('applyFiltersBtn').addEventListener('click', () => {
                    this.applyFilters();
                });

                // Temizle butonu
                document.getElementById('clearAllBtn').addEventListener('click', () => {
                    this.clearAllFilters();
                });

                // Select değişikliklerini dinle
                document.querySelectorAll('select.select2').forEach(select => {
                    $(select).on('change', () => {
                        this.updateFilterState();
                    });
                });

                // Range input değişikliklerini dinle
                ['minPrice', 'maxPrice', 'minYear', 'maxYear', 'minWeight', 'maxWeight'].forEach(id => {
                    document.getElementById(id).addEventListener('change', utils.debounce(() => {
                        this.updateFilterState();
                    }, 300));
                });
            }

            async loadInitialData() {
                try {
                    utils.showLoading(true);
                    
                    // Kategorileri yükle
                    const categories = await this.fetchCategories();
                    this.populateSelect('categorySelect', categories);

                    // Üreticileri yükle
                    const manufacturers = await this.fetchManufacturers();
                    this.populateSelect('manufacturerSelect', manufacturers);

                    // Model formatlarını yükle
                    const modelFormats = ['3D', 'CAD', 'STEP', 'IGES'];
                    this.populateSelect('modelFormatSelect', modelFormats);

                    // Sertifikaları yükle
                    const certificates = ['ISO', 'CE', 'TSE', 'ROHS', 'API', 'ATEX'];
                    this.populateSelect('certificateSelect', certificates);

                } catch (error) {
                    utils.showError('Veriler yüklenirken bir hata oluştu');
                } finally {
                    utils.showLoading(false);
                }
            }

            async fetchCategories() {
                const response = await fetch(`${API.baseUrl}${API.endpoints.categories}`);
                if (!response.ok) throw new Error('Kategoriler yüklenemedi');
                return await response.json();
            }

            async fetchManufacturers() {
                const response = await fetch(`${API.baseUrl}${API.endpoints.manufacturers}`);
                if (!response.ok) throw new Error('Üreticiler yüklenemedi');
                return await response.json();
            }

            populateSelect(selectId, options) {
                const select = document.getElementById(selectId);
                select.innerHTML = '';
                
                options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = typeof option === 'object' ? option.id : option;
                    optionElement.textContent = typeof option === 'object' ? option.name : option;
                    select.appendChild(optionElement);
                });

                $(select).trigger('change');
            }

            updateFilterState() {
                // Select değerlerini güncelle
                filterState.category = $('#categorySelect').val() || [];
                filterState.modelFormats = $('#modelFormatSelect').val() || [];
                filterState.manufacturer = $('#manufacturerSelect').val() || [];
                filterState.status = $('#statusSelect').val();
                filterState.rating = $('#ratingSelect').val();
                filterState.delivery = $('#deliverySelect').val();
                filterState.certificates = $('#certificateSelect').val() || [];
                filterState.warranty = $('#warrantySelect').val();
                filterState.sort = $('#sortSelect').val();

                // Range değerlerini güncelle
                filterState.price = {
                    min: parseInt(document.getElementById('minPrice').value) || null,
                    max: parseInt(document.getElementById('maxPrice').value) || null
                };

                filterState.year = {
                    min: parseInt(document.getElementById('minYear').value) || null,
                    max: parseInt(document.getElementById('maxYear').value) || null
                };

                filterState.weight = {
                    min: parseInt(document.getElementById('minWeight').value) || null,
                    max: parseInt(document.getElementById('maxWeight').value) || null
                };

                this.updateActiveFilters();
            }

            updateActiveFilters() {
                const container = document.getElementById('activeFilters');
                container.innerHTML = '';

                Object.entries(filterState).forEach(([key, value]) => {
                    if (Array.isArray(value) && value.length > 0) {
                        value.forEach(item => {
                            this.addFilterTag(container, item, key);
                        });
                    } else if (typeof value === 'object' && value !== null) {
                        if (value.min !== null || value.max !== null) {
                            const text = `${key}: ${value.min || 0} - ${value.max || '∞'}`;
                            this.addFilterTag(container, text, key);
                        }
                    } else if (value !== null && value !== '') {
                        this.addFilterTag(container, value, key);
                    }
                });
            }

            addFilterTag(container, text, type) {
                const tag = document.createElement('div');
                tag.className = 'filter-tag';
                tag.innerHTML = `
                    <span>${text}</span>
                    <i class="fas fa-times" data-type="${type}" data-value="${text}"></i>
                `;
                
                tag.querySelector('i').addEventListener('click', (e) => {
                    this.removeFilter(e.target.dataset.type, e.target.dataset.value);
                });
                
                container.appendChild(tag);
            }

            removeFilter(type, value) {
                if (Array.isArray(filterState[type])) {
                    filterState[type] = filterState[type].filter(item => item !== value);
                    $(`#${type}Select`).val(filterState[type]).trigger('change');
                } else if (typeof filterState[type] === 'object') {
                    filterState[type] = { min: null, max: null };
                    document.getElementById(`min${type.charAt(0).toUpperCase() + type.slice(1)}`).value = '';
                    document.getElementById(`max${type.charAt(0).toUpperCase() + type.slice(1)}`).value = '';
                    document.getElementById(`${type}RangeSlider`).noUiSlider.reset();
                } else {
                    filterState[type] = '';
                    $(`#${type}Select`).val('').trigger('change');
                }

                this.updateActiveFilters();
            }

            async applyFilters() {
                try {
                    utils.showLoading(true);

                    // API'ye gönderilecek filtreleri hazırla
                    const filters = this.prepareFiltersForAPI();

                    // API isteği yap
                    const response = await fetch(`${API.baseUrl}${API.endpoints.filter}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(filters)
                    });

                    if (!response.ok) throw new Error('Filtreleme işlemi başarısız');

                    const data = await response.json();
                    
                    // Sonuçları işle ve UI'ı güncelle
                    this.handleFilterResults(data);

                    // Filtreleme başarılı event'ini tetikle
                    this.triggerFilterEvent(data);

                } catch (error) {
                    utils.showError('Filtreleme sırasında bir hata oluştu');
                    console.error('Filter error:', error);
                } finally {
                    utils.showLoading(false);
                }
            }

            prepareFiltersForAPI() {
                // API'nin beklediği formatta filtreleri hazırla
                const filters = {};

                Object.entries(filterState).forEach(([key, value]) => {
                    if (Array.isArray(value) && value.length > 0) {
                        filters[key] = value;
                    } else if (typeof value === 'object' && value !== null) {
                        if (value.min !== null || value.max !== null) {
                            filters[key] = {
                                min: value.min || undefined,
                                max: value.max || undefined
                            };
                        }
                    } else if (value !== null && value !== '') {
                        filters[key] = value;
                    }
                });

                return filters;
            }

            handleFilterResults(data) {
                // Filtreleme sonuçlarını işle
                if (data.success) {
                    // Sonuçları göster
                    this.displayResults(data.products);
                    
                    // Filtreleme özeti güncelle
                    this.updateFilterSummary(data.total);
                } else {
                    utils.showError(data.message || 'Filtreleme işlemi başarısız');
                }
            }

            displayResults(products) {
                // Bu method, ana uygulamadaki ürün listesini güncelleyecek
                // Event ile ana uygulamaya bildir
                const event = new CustomEvent('filterResults', {
                    detail: {
                        products: products
                    }
                });
                document.dispatchEvent(event);
            }

            updateFilterSummary(total) {
                // Filtreleme özeti güncelle (örn: "150 ürün bulundu")
                const event = new CustomEvent('filterSummary', {
                    detail: {
                        total: total
                    }
                });
                document.dispatchEvent(event);
            }

            triggerFilterEvent(data) {
                // Filtreleme tamamlandı event'ini tetikle
                const event = new CustomEvent('filterComplete', {
                    detail: {
                        filters: filterState,
                        results: data
                    }
                });
                document.dispatchEvent(event);
            }

            clearAllFilters() {
                // Tüm filtreleri sıfırla
                Object.keys(filterState).forEach(key => {
                    if (Array.isArray(filterState[key])) {
                        filterState[key] = [];
                    } else if (typeof filterState[key] === 'object') {
                        filterState[key] = { min: null, max: null };
                    } else {
                        filterState[key] = '';
                    }
                });

                // Select2'leri sıfırla
                $('.select2').val(null).trigger('change');

                // Range slider'ları sıfırla
                document.querySelectorAll('[id$="RangeSlider"]').forEach(slider => {
                    slider.noUiSlider.reset();
                });

                // Input'ları temizle
                document.querySelectorAll('.range-input').forEach(input => {
                    input.value = '';
                });

                // Aktif filtreleri güncelle
                this.updateActiveFilters();

                // Filtreleri uygula
                this.applyFilters();
            }
        }

        // Filtreleme sistemini başlat
        document.addEventListener('DOMContentLoaded', () => {
            const filterManager = new FilterManager();
        });
    </script>
</body>
</html>
